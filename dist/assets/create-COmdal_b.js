import{d as c,e as i,h as E,E as a}from"./headers-ahJeJWcP.js";async function A(e){e.preventDefault();try{const o=l(c);await S(o)}catch(o){n(o)}}function l(e){const o=new FormData(e),t=Object.fromEntries(o),r=t.tags.split(",").map(s=>s.trim());return{title:t.title,body:t.body,tags:r,media:{url:t.media,alt:t.alt}}}async function S(e){if(!localStorage.getItem("accessToken"))throw new Error("No access token found. Please log in.");try{const t=await fetch(i,{method:"POST",headers:E(),body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create post");const r=await t.json();return alert("Post created successfully"),window.location.href="/profile/",r}catch(t){n(t)}}function n(e){console.error("Error:",e),a?a.textContent=`Error: ${e.message||"Something went wrong"}`:alert(`Error: ${e.message||"Something went wrong"}`)}export{A as g,n as h};
